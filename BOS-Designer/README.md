# BOS-Designer（BeautyOS 設計師端）

設計師／店務人員使用的後台系統，用於管理預約、訂單、排班、價目、優惠券、獎金與報表等店務作業。客戶在 **BOS-Customer** 送出預約後，由此系統審核、排程與營運管理。

---

## 專案目的

- **設計師端營運後台**：提供單一入口管理每日預約、訂單審核、打卡、排休與行事曆。
- **店務數據整合**：價目表、優惠券、獎金發放與各類報表（業績、薪資、日報、抽成等）集中於同一系統。
- **與客戶端協作**：與 BOS-Customer（客戶預約系統）搭配，客戶預約後由設計師端審核與排程。

---

## 主要用途與功能

| 功能模組 | 說明 |
|----------|------|
| **首頁** | 儀表板與常用入口 |
| **訂單／預約** | 預約總覽、訂單列表；依 `isReserved` 區分預約／訂單，依 `status` 區分待審核、預約成功、已完成、設計師已取消等 |
| **打卡** | 設計師打卡紀錄與清單（成功、遲到、早退等狀態） |
| **行事曆／排休** | 共同預約表、排休設定、公休、每日預約檢視與事件管理 |
| **價目表** | 服務項目與價格維護 |
| **優惠券** | 優惠券管理、發放紀錄與配送 |
| **獎金** | 獎金管理、發放紀錄與配送 |
| **報表** | 分析、薪資、日報、帳單、設計師收益、抽成、抽成明細等 |
| **客戶資料** | 客戶列表與客戶詳情 |

---

## 操作介紹

### 登入

1. 啟動後台後，未登入會導向登入頁。
2. 使用門市／設計師帳號登入；支援「常駐登入 30 天」或「1 天」選項。

### 訂單與預約

- **預約**：`isReserved: true` 為預約單；設計師端預約不判斷可預約與否，可直接建立。
- **訂單狀態**：待審核 → 預約成功（有接單）→ 已完成（不可再審核，可改備註）；設計師可取消／拒絕。
- 訂單明細會顯示店家名稱；行事曆最上方也會顯示店家名稱。

### 行事曆與排休

- 排休、公休可分別設定；若為公休仍可有預約項目。
- 公休當日若無其他預約，介面可只顯示一個公休提示。

### 測試帳號（僅供開發／測試）

```
手機：0977000632 或 09122233789
密碼：0632 或 3789（對應 09122233789 時為 3789）
常駐登入：可勾選 isKeepLogin 使用 30 天／1 天
```

---

## 技術與環境

- **框架**：Vue 2、Vue Router、Vuex  
- **API**：GraphQL（所有 input type 定義於各 service 檔案上方註釋）  
- **Node**：建議 `^14.16.0`  
- **建置**：Vue CLI 5；開發時使用 `--mode dev`（會讀取 `.env.dev`）

---

## 專案起手式

### 1. 切換 Node 版本並安裝依賴

```bash
# 建議使用 nvm 或類似工具切換至 Node 14+
npm install
```

### 2. 環境變數（可選）

開發模式預設使用 ` .env.dev`，API 預設為：

- `VUE_APP_BASE_API`：`https://apibeautyos.mlgroup.vip/graphql`

若需自訂，可複製並修改 `.env.dev` 或建立 `.env.local`（勿提交版控）。

### 3. 編譯並啟動開發伺服器（熱重載）

```bash
npm run serve
```

- 一般：`npm run serve`（HTTP）  
- HTTPS：`npm run serve-https`  
- 啟動成功後預設為：**http://localhost:8080/designer/**  
- 其他 script 與環境設定請見 `package.json`。

### 4. 打包正式版

```bash
npm run build
```

產出在 `dist/`，對應 `publicPath: '/designer'`。

### 5. 程式碼檢查與自動修復

```bash
npm run lint
```

會依 ESLint 規則（如 Airbnb 風格：分號、單引號等）檢查並嘗試自動修正；未使用／未定義變數等問題會在終端顯示。

---

## 注意事項

- 開發時請勿將敏感設定（API 金鑰、正式環境網址等）提交版控；可善用 `.env.local` 並加入 `.gitignore`。
- **Node 版本**：建議使用 Node 14～18；若使用 Node 22+，部分依賴（如 `@achrinza/node-ipc`）可能出現 `uv_interface_addresses` 錯誤，可改用建議版本或以完整權限執行。
- 更多 Vue CLI 設定可參考 [Configuration Reference](https://cli.vuejs.org/config/)。
